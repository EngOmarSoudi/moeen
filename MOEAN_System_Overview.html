<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOEAN Transportation Management System - System Overview</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 40px;
        }

        h1 {
            color: #1a5490;
            border-bottom: 3px solid #1a5490;
            padding-bottom: 15px;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        h2 {
            color: #2c7ab8;
            margin-top: 40px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-left: 4px solid #2c7ab8;
            padding-left: 15px;
            font-size: 1.8em;
        }

        h3 {
            color: #3a8cc7;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        h4 {
            color: #4a9cd8;
            margin-top: 15px;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        p {
            margin-bottom: 15px;
            text-align: justify;
        }

        ul,
        ol {
            margin-left: 30px;
            margin-bottom: 15px;
        }

        li {
            margin-bottom: 8px;
        }

        pre {
            background-color: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            overflow-x: auto;
            margin-bottom: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.4;
        }

        code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #d63384;
        }

        pre code {
            background-color: transparent;
            padding: 0;
            color: #333;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        th {
            background-color: #1a5490;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid #ddd;
        }

        tr:hover {
            background-color: #f9f9f9;
        }

        .diagram {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            overflow-x: auto;
        }

        .note {
            background-color: #e7f3ff;
            border-left: 4px solid #2c7ab8;
            padding: 15px;
            margin: 15px 0;
            border-radius: 3px;
        }

        .toc {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 20px;
            margin: 30px 0;
        }

        .toc ul {
            margin-left: 20px;
        }

        .toc li {
            margin-bottom: 10px;
        }

        .toc a {
            color: #2c7ab8;
            text-decoration: none;
        }

        .toc a:hover {
            text-decoration: underline;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .feature-card {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
        }

        .feature-card h4 {
            color: #1a5490;
            margin-top: 0;
        }

        .checkmark {
            color: #28a745;
            font-weight: bold;
            margin-right: 5px;
        }

        .footer {
            margin-top: 60px;
            padding-top: 20px;
            border-top: 2px solid #ddd;
            text-align: center;
            color: #666;
            font-size: 0.9em;
        }

        @media print {
            body {
                background-color: white;
            }

            .container {
                max-width: 100%;
                box-shadow: none;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>üöÄ MOEAN Transportation Management System</h1>
        <h2 style="border: none; border-left: none; margin-top: 0; text-align: center; color: #666;">Complete System
            Overview Documentation</h2>


        <h4>Status & Accent Colors</h4>
        <table style="width:100%; border-collapse:collapse; margin:15px 0;">
            <tr style="background-color:#f0f0f0;">
                <th style="border:1px solid #ddd; padding:10px; text-align:left;">Status</th>
                <th style="border:1px solid #ddd; padding:10px; text-align:left;">Color</th>
                <th style="border:1px solid #ddd; padding:10px; text-align:left;">Usage</th>
            </tr>
            <tr>
                <td style="border:1px solid #ddd; padding:10px;">Success/Positive</td>
                <td style="border:1px solid #ddd; padding:10px;"><code>#27AE60</code> (Green)</td>
                <td style="border:1px solid #ddd; padding:10px;">Completed trips, confirmations</td>
            </tr>
            <tr style="background-color:#f9f9f9;">
                <td style="border:1px solid #ddd; padding:10px;">Warning/Caution</td>
                <td style="border:1px solid #ddd; padding:10px;"><code>#F39C12</code> (Amber)</td>
                <td style="border:1px solid #ddd; padding:10px;">Alerts, pending actions</td>
            </tr>
            <tr>
                <td style="border:1px solid #ddd; padding:10px;">Error/Danger</td>
                <td style="border:1px solid #ddd; padding:10px;"><code>#E74C3C</code> (Red)</td>
                <td style="border:1px solid #ddd; padding:10px;">Failed trips, cancellations</td>
            </tr>
            <tr style="background-color:#f9f9f9;">
                <td style="border:1px solid #ddd; padding:10px;">Info</td>
                <td style="border:1px solid #ddd; padding:10px;"><code>#3498DB</code> (Blue)</td>
                <td style="border:1px solid #ddd; padding:10px;">Information messages</td>
            </tr>
        </table>

        <h3 style="color: #B8860B;">Design Requirements for AI Implementation</h3>

        <ul>
            <li><strong>Modern, Clean Interface:</strong> Professional transportation management aesthetic</li>
            <li><strong>Consistent Color Scheme:</strong> Apply #B8860B and #D4A574 throughout all pages</li>
            <li><strong>Tailwind CSS:</strong> Use utility classes for all styling</li>
            <li><strong>Responsive Design:</strong> Mobile-first approach for all screen sizes</li>
            <li><strong>Contrast:</strong> Maintain WCAG 2.1 AA compliance (4.5:1 minimum)</li>
            <li><strong>Dark Mode:</strong> Support light and dark theme variants</li>
            <li><strong>Professional Appearance:</strong> Suitable for transportation management operations</li>
        </ul>




        <h3 style="color: #B8860B;">Implementation Checklist for AI Editors</h3>

        <ul style="list-style-type: none; padding-left: 0;">
            <li style="margin: 8px 0;">‚úÖ Update tailwind.config.js with MOEAN custom colors</li>
            <li style="margin: 8px 0;">‚úÖ Import and apply CSS from resources/css/app.css</li>
            <li style="margin: 8px 0;">‚úÖ Use #B8860B for primary buttons and headers</li>
            <li style="margin: 8px 0;">‚úÖ Use #D4A574 for secondary elements and accents</li>
            <li style="margin: 8px 0;">‚úÖ Use #1F1F1F for all text (deep black)</li>
            <li style="margin: 8px 0;">‚úÖ Apply shadow class for cards and containers</li>
            <li style="margin: 8px 0;">‚úÖ Implement responsive design with Tailwind breakpoints</li>
            <li style="margin: 8px 0;">‚úÖ Support dark mode with appropriate color adjustments</li>
            <li style="margin: 8px 0;">‚úÖ Maintain WCAG 2.1 AA contrast ratios</li>
            <li style="margin: 8px 0;">‚úÖ Add hover and focus states to all interactive elements</li>
            <li style="margin: 8px 0;">‚úÖ Use gradient effects with MOEAN colors for visual interest</li>
            <li style="margin: 8px 0;">‚úÖ Ensure professional transportation management aesthetic</li>
        </ul>

        <hr style="margin: 30px 0; border: none; border-top: 2px solid #D4A574;">

        <h2 id="sidebar-menu" style="color: #B8860B; border-left-color: #B8860B;">üìã Sidebar Menu & System Architecture
        </h2>

        <p>This section provides a comprehensive guide to each menu item in the sidebar, detailing what each feature
            does, its purpose, main functions, and how it integrates with the overall system.</p>

        <h3>Dashboard main widgets ( ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ)</h3>

        <h4>Purpose</h4>
        <p>Central hub providing real-time overview of system operations and key metrics.</p>

        <h4>Main Functions</h4>
        <ul>
            <li><strong>Trip Summary:</strong> Display counts of scheduled, in-progress, completed, and canceled trips
            </li>
            <li><strong>Driver Status:</strong> Show active, available, on-break, and offline drivers</li>
            <li><strong>Fleet Status:</strong> Vehicle availability and maintenance status overview</li>
            <li><strong>Payment Collections:</strong> Daily cash collected and pending amounts</li>
            <li><strong>Recent Activities:</strong> Latest trip completions, customer interactions</li>
            <li><strong>Alerts:</strong> Active system alerts and notifications</li>
            <li><strong>Quick Stats:</strong> Key performance indicators (KPIs)</li>
        </ul>

        <h4>User Interaction</h4>
        <ul>
            <li>View real-time operational metrics</li>
            <li>Access quick links to create trips or manage drivers</li>
            <li>Monitor system health and performance</li>
        </ul>

        <h4>Related Modules</h4>
        <p>Integrates data from: Trips, Drivers, Vehicles, Payment Collections, Alerts</p>

        <hr style="margin: 30px 0; border: none; border-top: 2px solid #ddd;">

        <h3>Trips (ÿßŸÑÿ±ÿ≠ŸÑÿßÿ™) - Unified Trip Management</h3>

        <p>Comprehensive trip management module consolidating all trip booking, operations, and lifecycle management in
            a single interface. This unified system replaces separate customer pages and provides complete journey
            management capabilities.</p>

        <h4>Core Trip Features:</h4>

        <h4>1. Trip Creation & Booking (ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ±ÿ≠ŸÑÿ©)</h4>
        <p><strong>Purpose:</strong> Create new trips for both new and returning customers with flexible booking options
        </p>
        <ul>
            <li><strong>Customer Lookup & Registration Workflow:</strong>
                <ul>
                    <li><strong>Phase 1: Phone Number Verification</strong>
                        <ul>
                            <li>User enters customer phone number in the trip creation form</li>
                            <li>System queries customers table to verify phone number existence</li>
                            <li>Search uses phone field with exact or partial matching capability</li>
                        </ul>
                    </li>
                    <li><strong>Phase 2: Existing Customer Handling</strong>
                        <ul>
                            <li>If phone number EXISTS in database:</li>
                            <li>Display customer information card with:
                                <ul>
                                    <li>Customer name, contact info, document number</li>
                                    <li>Current status (active, inactive, VIP, corporate, pending)</li>
                                    <li>Agent assignment (if applicable)</li>
                                    <li>Previous trip count and last trip date</li>
                                    <li>Stored relatives/emergency contacts list</li>
                                </ul>
                            </li>
                            <li>User can verify: "Is this the correct customer?"</li>
                            <li>Allow SELECT button to confirm customer choice for trip</li>
                            <li>Option to modify customer info if incorrect (edit mode)</li>
                        </ul>
                    </li>
                    <li><strong>Phase 3: New Customer Registration</strong>
                        <ul>
                            <li>If phone number DOES NOT EXIST in database:</li>
                            <li>Display comprehensive customer registration form with required fields:</li>
                            <li><strong>Personal Information Section:</strong>
                                <ul>
                                    <li>Customer Name (required, text field)</li>
                                    <li>Phone Number (required, validated format, must be unique)</li>
                                    <li>Email Address (optional, email validation)</li>
                                    <li>Nationality (optional, dropdown from list)</li>
                                </ul>
                            </li>
                            <li><strong>ID/Document Details Section:</strong>
                                <ul>
                                    <li>Document Type (required, dropdown: National ID, Passport, Residence Permit,
                                        Driver License, Other)</li>
                                    <li>Document Number (required, alphanumeric, must be unique per type)</li>
                                    <li>Issuing Authority (optional, text field for country/state)</li>
                                </ul>
                            </li>
                            <li><strong>Customer Classification Section:</strong>
                                <ul>
                                    <li>Status ID (required, dropdown from customer_statuses: VIP, Active, Pending,
                                        Inactive, Corporate)</li>
                                    <li>Agent ID (optional, searchable dropdown of active agents)</li>
                                    <li>General Notes (optional, textarea for any general remarks)</li>
                                    <li>Special Case Note (optional, textarea for special requirements/preferences)</li>
                                </ul>
                            </li>
                            <li><strong>Emergency Contact Information Section:</strong>
                                <ul>
                                    <li>Relative/Friend Name (optional, text field)</li>
                                    <li>Relationship Type (optional, dropdown: Family, Friend, Company, Other)</li>
                                    <li>Emergency Contact Phone (optional, validated phone format)</li>
                                    <li>Allow adding multiple emergency contacts with + button</li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li><strong>Form Validation:</strong>
                        <ul>
                            <li>All REQUIRED fields must be populated before submission</li>
                            <li>Phone number validation: Format check, uniqueness in customers table</li>
                            <li>Document number validation: Format check, uniqueness per document type</li>
                            <li>Email validation: Standard email format (if provided)</li>
                            <li>Emergency contact validation: Phone format if contact number provided</li>
                            <li>Display clear error messages for each validation failure</li>
                            <li>Highlight invalid fields with red border and error text</li>
                        </ul>
                    </li>
                    <li><strong>Data Persistence:</strong>
                        <ul>
                            <li>On form submission (CREATE CUSTOMER button):</li>
                            <li>Insert new record into customers table with fields:
                                <ul>
                                    <li>id (auto-increment)</li>
                                    <li>name, phone, email, nationality</li>
                                    <li>document_no (from form)</li>
                                    <li>status_id (from dropdown selection)</li>
                                    <li>agent_id (if selected)</li>
                                    <li>notes, special_case_note</li>
                                    <li>created_at, updated_at (timestamps)</li>
                                </ul>
                            </li>
                            <li>For each emergency contact provided:
                                <ul>
                                    <li>Create record(s) in customer_relatives table with fields:</li>
                                    <li>customer_id (FK to newly created customer)</li>
                                    <li>name (relative name)</li>
                                    <li>phone (contact phone)</li>
                                    <li>relationship (type of relationship)</li>
                                    <li>created_at, updated_at</li>
                                </ul>
                            </li>
                            <li>On successful save: Display success message and auto-select new customer for trip</li>
                            <li>On error: Display error message and allow form correction</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>Trip Association:</strong>
                <ul>
                    <li>After customer selection (existing or new):</li>
                    <li>Proceed with trip details form</li>
                    <li>Link selected customer_id to trips.customer_id foreign key</li>
                    <li>Create TripCustomer record linking customer to trip</li>
                    <li>Customer information is now part of trip record lifecycle</li>
                </ul>
            </li>
            <li><strong>Customer Management:</strong>
                <ul>
                    <li>Quick search for existing customers by name, phone, or ID</li>
                    <li>Create new customer profiles inline during trip booking</li>
                    <li>Auto-populate customer details from previous records</li>
                    <li>Manage customer relatives and emergency contacts (CustomerRelative)</li>
                    <li>Track customer classification (new, regular, VIP, corporate)</li>
                    <li>Store special notes and service preferences</li>
                </ul>
            </li>
            <li><strong>Trip Planning:</strong>
                <ul>
                    <li>Define origin and destination cities</li>
                    <li>Select from predefined TravelRoutes or create custom routes</li>
                    <li>Set waypoints with sequential stops (TripWaypoint)</li>
                    <li>Specify trip type (Standard City, Airport Transfer, Multi-point)</li>
                    <li>Set service date and time (start_at field)</li>
                    <li>Configure trip leg (outbound or return)</li>
                </ul>
            </li>
            <li><strong>Fleet & Driver Assignment:</strong>
                <ul>
                    <li>Select vehicle type based on capacity requirements</li>
                    <li>Auto-suggest or manually assign drivers</li>
                    <li>Check driver availability and shift status</li>
                    <li>Assign specific vehicle from fleet inventory</li>
                    <li>Support for unassigned trips (pending dispatch)</li>
                </ul>
            </li>
            <li><strong>Passenger Management:</strong>
                <ul>
                    <li>Add multiple passengers per trip (TripCustomer records)</li>
                    <li>Distinguish main customer from additional passengers</li>
                    <li>Store passenger details and preferences</li>
                    <li>Track passenger count for capacity validation</li>
                </ul>
            </li>
            <li><strong>Trip Details:</strong>
                <ul>
                    <li>Record service kind (trip or operation)</li>
                    <li>Specify customer segment (new or returning)</li>
                    <li>Add optional hotel names (hospitality context)</li>
                    <li>Set operation category and hospitality product</li>
                    <li>Attach files and documentation (TripAttachment)</li>
                    <li>Add internal notes and special instructions</li>
                </ul>
            </li>
        </ul>

        <h4>2. Trip View & Details (ÿπÿ±ÿ∂ ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ±ÿ≠ŸÑÿ©)</h4>
        <p><strong>Purpose:</strong> Display comprehensive trip information with full history and relationships</p>
        <ul>
            <li><strong>Trip Overview:</strong>
                <ul>
                    <li>Trip code, status, and current progress</li>
                    <li>Customer information with contact details</li>
                    <li>Assigned driver and vehicle details</li>
                    <li>Route information with waypoints</li>
                    <li>Schedule (start_at, estimated completion)</li>
                </ul>
            </li>
            <li><strong>Passenger Details:</strong>
                <ul>
                    <li>Table of all passengers on trip</li>
                    <li>Passenger contact information</li>
                    <li>Passenger status and special requirements</li>
                </ul>
            </li>
            <li><strong>Trip History:</strong>
                <ul>
                    <li>Status change timeline (TripStepTransition)</li>
                    <li>Workflow execution steps (TripStepEvent)</li>
                    <li>Media/photo attachments (TripStepMedia)</li>
                    <li>Location history and tracking data</li>
                </ul>
            </li>
            <li><strong>Customer Profile Integration:</strong>
                <ul>
                    <li>Full customer profile with history</li>
                    <li>Previous trips and patterns</li>
                    <li>Emergency contacts (CustomerRelative)</li>
                    <li>Customer status and classification</li>
                    <li>Payment history and collections</li>
                </ul>
            </li>
            <li><strong>Related Information:</strong>
                <ul>
                    <li>Agent/broker information if applicable</li>
                    <li>Payment collection status (PaymentCollection)</li>
                    <li>Evaluation forms and responses (TripEvaluation, TripEvaluationValue)</li>
                    <li>Alerts and incidents (TripStepEvent)</li>
                </ul>
            </li>
        </ul>

        <h4>3. Trip Listing & Management (ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ±ÿ≠ŸÑÿßÿ™)</h4>
        <p><strong>Purpose:</strong> View and manage all trips with advanced filtering and search capabilities</p>
        <ul>
            <li><strong>List View Features:</strong>
                <ul>
                    <li>Table display with columns: Trip Code, Customer, Driver, Vehicle, Route, Status, Date, Location
                    </li>
                    <li>Real-time status indicators</li>
                    <li>Quick action buttons: View, Edit, Start, Complete, Cancel</li>
                </ul>
            </li>
            <li><strong>Search & Filter:</strong>
                <ul>
                    <li>Search by trip code, customer name, phone number, or email</li>
                    <li>Filter by status (scheduled, in_progress, completed, canceled)</li>
                    <li>Filter by date range, driver, vehicle, agent, trip type</li>
                    <li>Filter by customer classification (new, regular, VIP, corporate)</li>
                    <li>Filter by service kind (trip, operation)</li>
                    <li>Filter by trip leg (outbound, return)</li>
                </ul>
            </li>
            <li><strong>Sorting & Pagination:</strong>
                <ul>
                    <li>Sort by any column (code, date, status, driver, customer)</li>
                    <li>Configurable per-page display (15, 25, 50 records)</li>
                    <li>Quick navigation between pages</li>
                </ul>
            </li>
            <li><strong>Bulk Actions:</strong>
                <ul>
                    <li>Bulk status changes (complete, cancel, reschedule)</li>
                    <li>Bulk driver reassignment</li>
                    <li>Bulk vehicle reassignment</li>
                    <li>Export trip data to report</li>
                </ul>
            </li>
        </ul>

        <h4>4. Trip Operations & Dispatch (ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿ±ÿ≠ŸÑÿßÿ™)</h4>
        <p><strong>Purpose:</strong> Manage trip execution, driver assignment, and real-time tracking</p>
        <ul>
            <li><strong>Unassigned Trips Management:</strong>
                <ul>
                    <li>Display pending trips (driver_id is NULL)</li>
                    <li>Drag-and-drop driver assignment interface</li>
                    <li>Show available drivers with location and status</li>
                    <li>Suggest optimal driver based on location/capacity</li>
                    <li>Instant trip dispatch notifications</li>
                </ul>
            </li>
            <li><strong>Emergency Operations (Urgent Dispatch):</strong>
                <ul>
                    <li>Map-based driver search and selection</li>
                    <li>Show nearby available drivers in real-time</li>
                    <li>One-click instant assignment with priority alert</li>
                    <li>Direct communication channel with assigned driver</li>
                    <li>Real-time location tracking during dispatch</li>
                </ul>
            </li>
            <li><strong>Trip Lifecycle Management:</strong>
                <ul>
                    <li>Start trip (update status to in_progress)</li>
                    <li>Update trip status in real-time</li>
                    <li>Record route deviations and issues</li>
                    <li>Complete trip with final confirmation</li>
                    <li>Cancel trip with reason documentation</li>
                </ul>
            </li>
            <li><strong>Workflow Integration:</strong>
                <ul>
                    <li>Automatically assign workflow steps based on trip type</li>
                    <li>Track workflow execution (WorkflowStepExecution)</li>
                    <li>Handle step transitions and state changes (TripStepTransition)</li>
                    <li>Timeout alerts and escalation handling</li>
                </ul>
            </li>
        </ul>

        <h4>5. Trip Quality & Evaluation (ÿ™ŸÇŸäŸäŸÖ ÿßŸÑÿ±ÿ≠ŸÑÿßÿ™)</h4>
        <p><strong>Purpose:</strong> Manage trip quality assessments and customer feedback</p>
        <ul>
            <li><strong>Evaluation Management:</strong>
                <ul>
                    <li>Auto-assign evaluation forms to completed trips (based on trip type)</li>
                    <li>Track evaluation status (pending, completed, reviewed)</li>
                    <li>Record evaluation responses (TripEvaluationValue)</li>
                    <li>Calculate evaluation scores</li>
                </ul>
            </li>
            <li><strong>Quality Tracking:</strong>
                <ul>
                    <li>View evaluation results and ratings</li>
                    <li>Identify trips with negative feedback</li>
                    <li>Flag service issues for review</li>
                    <li>Generate quality improvement reports</li>
                </ul>
            </li>
            <li><strong>Feedback Management:</strong>
                <ul>
                    <li>Collect customer feedback on trip experience</li>
                    <li>Rate driver performance</li>
                    <li>Rate vehicle cleanliness and comfort</li>
                    <li>Document special incidents or complaints</li>
                </ul>
            </li>
        </ul>

        <h4>6. Trip Analytics & Reporting (ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ±ÿ≠ŸÑÿßÿ™)</h4>
        <p><strong>Purpose:</strong> Generate insights and reports from trip data</p>
        <ul>
            <li><strong>Trip Statistics:</strong>
                <ul>
                    <li>Daily/weekly/monthly trip counts</li>
                    <li>Trip completion rates</li>
                    <li>Average trip duration and distance</li>
                    <li>Trip status distribution</li>
                </ul>
            </li>
            <li><strong>Revenue Analytics:</strong>
                <ul>
                    <li>Trip-based revenue calculations</li>
                    <li>Revenue by trip type, date, agent, or driver</li>
                    <li>Collections vs. outstanding payments</li>
                    <li>Commission calculations for agents</li>
                </ul>
            </li>
            <li><strong>Performance Metrics:</strong>
                <ul>
                    <li>Driver performance (trips completed, ratings, on-time %)</li>
                    <li>Vehicle utilization (trips per vehicle, idle time)</li>
                    <li>Route efficiency analysis</li>
                    <li>Customer satisfaction scores</li>
                </ul>
            </li>
            <li><strong>Export & Reporting:</strong>
                <ul>
                    <li>Export trip data to CSV/Excel</li>
                    <li>Generate PDF trip reports</li>
                    <li>Schedule automated report delivery</li>
                    <li>Custom report builder</li>
                </ul>
            </li>
        </ul>

        <h4>7. Trip Attachments & Documentation (ŸÖÿ±ŸÅŸÇÿßÿ™ ÿßŸÑÿ±ÿ≠ŸÑÿ©)</h4>
        <p><strong>Purpose:</strong> Store and manage trip-related files and evidence</p>
        <ul>
            <li><strong>File Management:</strong>
                <ul>
                    <li>Attach photos (TripStepMedia)</li>
                    <li>Attach documents (invoices, receipts, permits)</li>
                    <li>Attach proof of delivery photos</li>
                    <li>Store incident evidence (accident photos, damage documentation)</li>
                </ul>
            </li>
            <li><strong>Media Tracking:</strong>
                <ul>
                    <li>Track file upload time and user</li>
                    <li>Organize files by step/event</li>
                    <li>Maintain audit trail of documentation</li>
                </ul>
            </li>
        </ul>

        <h4>Data Models Used:</h4>
        <pre><code>Trip (Main entity)
‚îú‚îÄ Customer (Trip booker/main passenger)
‚îú‚îÄ Driver (Assigned driver)
‚îú‚îÄ Vehicle (Assigned vehicle)
‚îú‚îÄ TripCustomer (All passengers on trip)
‚îú‚îÄ TravelRoute (Route template)
‚îú‚îÄ TripWaypoint (Route waypoints)
‚îú‚îÄ TripAttachment (Files and documentation)
‚îú‚îÄ TripEvaluation (Quality form assignment)
‚îú‚îÄ TripEvaluationValue (Evaluation responses)
‚îú‚îÄ TripStepEvent (Workflow events)
‚îú‚îÄ TripStepMedia (Event media/photos)
‚îú‚îÄ TripStepState (Step state tracking)
‚îú‚îÄ TripStepTransition (Status transitions)
‚îú‚îÄ PaymentCollection (Payment tracking)
‚îú‚îÄ Alert (Trip-related alerts)
‚îî‚îÄ WorkflowExecution (Trip workflow instances)</code></pre>

        <hr style="margin: 30px 0; border: none; border-top: 2px solid #ddd;">

        <h3>Operations Group (ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑ) - Part of Trips Module</h3>

        <p>The following operations are integrated into the main <strong>Trips</strong> management module above,
            providing comprehensive operational control.</p>

        <h4>1. Operations List (ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑÿßÿ™)</h4>
        <p><strong>Purpose:</strong> View all trips in organized table format</p>
        <ul>
            <li><strong>Functionality:</strong>
                <ul>
                    <li>Display trips in table/list view with columns: Trip Code, Customer, Driver, Status, Date,
                        Location</li>
                    <li>Filter by status (scheduled, in_progress, completed, canceled)</li>
                    <li>Filter by date range, driver, vehicle, agent</li>
                    <li>Quick actions: View details, Edit, Start trip, Complete trip</li>
                    <li>Bulk actions: Change status, Reassign driver, Reschedule</li>
                    <li>Search by trip code, customer name, or phone</li>
                    <li>Real-time status updates</li>
                </ul>
            </li>
            <li><strong>Use Cases:</strong>
                <ul>
                    <li>Operations team monitoring daily schedules</li>
                    <li>Supervisors checking trip completion rates</li>
                    <li>Customer service looking up trip details</li>
                </ul>
            </li>
        </ul>

        <h4>2. Send Operations (ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑÿßÿ™)</h4>
        <p><strong>Purpose:</strong> Bulk dispatch of trips to drivers using grid interface</p>
        <ul>
            <li><strong>Functionality:</strong>
                <ul>
                    <li>Display scheduled trips and available drivers in grid layout</li>
                    <li>Drag-and-drop trip assignment to drivers</li>
                    <li>Show driver availability (current trips, shift status)</li>
                    <li>Suggest optimal driver based on location/vehicle type</li>
                    <li>Confirm and send assignments to drivers (via SMS/notification)</li>
                    <li>Display "Free Drivers" badge with count</li>
                </ul>
            </li>
            <li><strong>Optimization:</strong> Considers driver location, vehicle capacity, availability</li>
        </ul>

        <h4>3. Emergency Operation (ÿ£ŸÖÿ± ÿ™ÿ¥ÿ∫ŸäŸÑ ÿ∑ÿßÿ±ÿ¶)</h4>
        <p><strong>Purpose:</strong> Handle urgent last-minute trip assignments</p>
        <ul>
            <li><strong>Functionality:</strong>
                <ul>
                    <li>Map-based driver search and selection</li>
                    <li>Show nearby available drivers on map</li>
                    <li>Instant trip assignment with priority notification</li>
                    <li>Real-time location tracking during assignment</li>
                    <li>Direct communication with selected driver</li>
                </ul>
            </li>
            <li><strong>Use Case:</strong> VIP customers, time-sensitive requests, urgent customer needs</li>
        </ul>

        <h4>4. Trip Evaluations (ÿ™ŸÇŸäŸäŸÖÿßÿ™ ÿßŸÑÿ±ÿ≠ŸÑÿßÿ™)</h4>
        <p><strong>Purpose:</strong> Manage and view quality assessments of completed trips</p>
        <ul>
            <li><strong>Functionality:</strong>
                <ul>
                    <li>Display evaluation forms assigned to trips</li>
                    <li>Show evaluation status (pending, completed)</li>
                    <li>View evaluation results and scores</li>
                    <li>Identify trips with negative evaluations</li>
                    <li>Generate evaluation reports for quality improvement</li>
                </ul>
            </li>
            <li><strong>Data Model:</strong>
                <ul>
                    <li>TripEvaluation: Links evaluation form to trip</li>
                    <li>TripEvaluationValue: Stores answer values for each form field</li>
                </ul>
            </li>
        </ul>

        <hr style="margin: 30px 0; border: none; border-top: 2px solid #ddd;">

        <h3>Trip Types (ÿ£ŸÜŸàÿßÿπ ÿßŸÑÿ±ÿ≠ŸÑÿßÿ™)</h3>

        <h4>Purpose</h4>
        <p>Manage journey type templates with associated routes and workflows.</p>

        <h4>Main Features</h4>
        <ul>
            <li><strong>Create Trip Types:</strong> Define categories like "Standard City", "Airport Transfer",
                "Multi-point", etc.</li>
            <li><strong>Assign Routes:</strong> Link standard routes (TravelRoute) to each trip type</li>
            <li><strong>Set Workflows:</strong> Assign workflow definitions for automated step processing</li>
            <li><strong>Configure Pricing:</strong> Define base prices and rate structures (if applicable)</li>
            <li><strong>Manage Images:</strong> Upload promotional or reference images</li>
        </ul>

        <h4>Use Case</h4>
        <p>When a user creates a trip and selects a specific type, the system auto-populates the route and assigns the
            appropriate workflow execution steps.</p>

        <hr style="margin: 30px 0; border: none; border-top: 2px solid #ddd;">

        <h3>Drivers (ÿßŸÑÿ≥ÿßÿ¶ŸÇŸàŸÜ)</h3>

        <h4>Purpose</h4>
        <p>Manage driver profiles, assignments, and real-time tracking.</p>

        <h4>Main Functions</h4>
        <ul>
            <li><strong>Driver Registry:</strong> Create and manage driver accounts with contact info, ID, licenses</li>
            <li><strong>Status Tracking:</strong> Monitor driver states (available, busy, on-break, offline)</li>
            <li><strong>Real-time Location:</strong> Display GPS coordinates via DriverLastLocation model</li>
            <li><strong>Trip History:</strong> View driver's completed/assigned trips</li>
            <li><strong>Performance Metrics:</strong> Track driver ratings, on-time performance, customer feedback</li>
            <li><strong>Vehicle Assignment:</strong> Link drivers to vehicles via DriverVehicle junction</li>
            <li><strong>Shift Management:</strong> Set driver availability windows (DriverShift)</li>
            <li><strong>Location Pings:</strong> Historical location records (DriverLocationPings) for audit trail</li>
        </ul>

        <h4>Related Models</h4>
        <pre><code>Driver (Main profile)
‚îú‚îÄ DriverLastLocation (Current position)
‚îú‚îÄ DriverLocationPings (Historical positions)
‚îú‚îÄ DriverShift (Availability schedule)
‚îú‚îÄ DriverStatusHistory (Status change log)
‚îú‚îÄ DriverVehicle (Vehicle assignments)
‚îî‚îÄ Trip (Active/completed trips)</code></pre>

        <hr style="margin: 30px 0; border: none; border-top: 2px solid #ddd;">

        <h3>Vehicle Types (ÿ£ŸÜŸàÿßÿπ ÿßŸÑÿ≥Ÿäÿßÿ±ÿßÿ™)</h3>

        <h4>Purpose</h4>
        <p>Define vehicle classification categories with capacity and service specifications. VehicleType is the master
            data that categorizes all vehicles in the fleet.</p>

        <h4>Main Functions</h4>
        <ul>
            <li><strong>Vehicle Classification:</strong> Create vehicle type categories (Sedan, SUV, Van, Bus,
                Limousine, etc.)</li>
            <li><strong>Capacity Definition:</strong> Set standard seating capacity for each vehicle type</li>
            <li><strong>Service Description:</strong> Document the purpose and use case for each type</li>
            <li><strong>Fleet Planning:</strong> Determine which vehicle types to purchase based on service needs</li>
            <li><strong>Trip Assignment Logic:</strong> Use vehicle capacity to suggest appropriate vehicle types for
                trips</li>
            <li><strong>Cost Management:</strong> Track operational costs specific to vehicle types</li>
            <li><strong>Pricing Structure:</strong> Define base rates and pricing tiers per vehicle type</li>
        </ul>

        <h4>Database Fields (vehicle_types table)</h4>
        <ul>
            <li><strong>id</strong> - Primary key (auto-increment)</li>
            <li><strong>name</strong> - Unique vehicle type name (e.g., 'Sedan', 'SUV', 'Van', 'Bus')</li>
            <li><strong>capacity</strong> - Standard seating capacity (integer, e.g., 4, 7, 12, 40)</li>
            <li><strong>description</strong> - Detailed description of the vehicle type and its use case</li>
            <li><strong>created_at</strong> - Timestamp when type was created</li>
            <li><strong>updated_at</strong> - Timestamp of last modification</li>
        </ul>

        <h4>Relationships</h4>
        <ul>
            <li><strong>HasMany Vehicles:</strong> One vehicle type can have many physical vehicles
                <ul>
                    <li>Example: VehicleType 'Sedan' has 10 physical vehicles (with plate numbers ABC-123, ABC-124,
                        etc.)</li>
                    <li>Used to: Filter all sedans when assigning to appropriate trips</li>
                </ul>
            </li>
        </ul>

        <h4>Example Vehicle Types</h4>
        <table style="width:100%; border-collapse:collapse; margin:15px 0;">
            <tr style="background-color:#f0f0f0;">
                <th style="border:1px solid #ddd; padding:10px;">Type Name</th>
                <th style="border:1px solid #ddd; padding:10px;">Capacity</th>
                <th style="border:1px solid #ddd; padding:10px;">Description</th>
                <th style="border:1px solid #ddd; padding:10px;">Use Case</th>
            </tr>
            <tr>
                <td style="border:1px solid #ddd; padding:10px;">Sedan</td>
                <td style="border:1px solid #ddd; padding:10px;">4</td>
                <td style="border:1px solid #ddd; padding:10px;">Standard 4-seater sedan car</td>
                <td style="border:1px solid #ddd; padding:10px;">Individual customers, couples, business meetings</td>
            </tr>
            <tr style="background-color:#f9f9f9;">
                <td style="border:1px solid #ddd; padding:10px;">SUV</td>
                <td style="border:1px solid #ddd; padding:10px;">7</td>
                <td style="border:1px solid #ddd; padding:10px;">Sport Utility Vehicle with 7 seats</td>
                <td style="border:1px solid #ddd; padding:10px;">Small groups, families, off-road trips</td>
            </tr>
            <tr>
                <td style="border:1px solid #ddd; padding:10px;">Van</td>
                <td style="border:1px solid #ddd; padding:10px;">12</td>
                <td style="border:1px solid #ddd; padding:10px;">Passenger van with 12 seats</td>
                <td style="border:1px solid #ddd; padding:10px;">Medium groups, corporate outings, tours</td>
            </tr>
            <tr style="background-color:#f9f9f9;">
                <td style="border:1px solid #ddd; padding:10px;">Bus</td>
                <td style="border:1px solid #ddd; padding:10px;">40</td>
                <td style="border:1px solid #ddd; padding:10px;">Large passenger coach bus</td>
                <td style="border:1px solid #ddd; padding:10px;">Large groups, charter services, long-distance travel
                </td>
            </tr>
            <tr>
                <td style="border:1px solid #ddd; padding:10px;">Limousine</td>
                <td style="border:1px solid #ddd; padding:10px;">5</td>
                <td style="border:1px solid #ddd; padding:10px;">Luxury limousine service</td>
                <td style="border:1px solid #ddd; padding:10px;">Executive clients, VIP customers, premium service</td>
            </tr>
        </table>

        <h4>Related Models</h4>
        <pre><code>VehicleType (Master Data)
‚îú‚îÄ Vehicle (Many physical vehicles belong to one type)
‚îú‚îÄ Trip (Trips can reference vehicle_type_id for type-specific needs)
‚îî‚îÄ TripTypeRoutes (Trip types can specify preferred vehicle types)</code></pre>

        <hr style="margin: 30px 0; border: none; border-top: 2px solid #ddd;">

        <h3>Vehicles (ÿßŸÑÿ≥Ÿäÿßÿ±ÿßÿ™)</h3>

        <h4>Purpose</h4>
        <p>Manage fleet inventory with maintenance tracking, availability status, and complete vehicle lifecycle
            management. Each Vehicle is a physical asset linked to a VehicleType category.</p>

        <h4>Main Functions</h4>
        <ul>
            <li><strong>Fleet Inventory:</strong> Track all physical vehicles in the fleet with unique identifiers
                (plate number, VIN)</li>
            <li><strong>Vehicle Type Association:</strong> Link each vehicle to a VehicleType for capacity and service
                classification</li>
            <li><strong>Vehicle Details:</strong> Record model, color, year, and other specifications</li>
            <li><strong>Insurance/Registration:</strong> Track and monitor expiry dates for insurance policies and
                vehicle registration</li>
            <li><strong>Status Management:</strong> Mark vehicles as active, in maintenance, or inactive</li>
            <li><strong>Maintenance Scheduling:</strong> Record and track scheduled maintenance, repairs, and
                inspections</li>
            <li><strong>Driver Assignment:</strong> Assign drivers to vehicles (many-to-many relationship via
                DriverVehicle)</li>
            <li><strong>Trip Assignment:</strong> Assign specific vehicles to trips based on capacity and availability
            </li>
            <li><strong>Availability Tracking:</strong> Check if vehicle is available for trip assignment based on
                current status</li>
            <li><strong>Usage History:</strong> Track which trips have used each vehicle for audit and maintenance
                planning</li>
        </ul>

        <h4>Database Fields (vehicles table)</h4>
        <ul>
            <li><strong>id</strong> - Primary key (auto-increment)</li>
            <li><strong>plate_number</strong> - Unique license plate (e.g., 'ABC-1234', 'XYZ-5678')</li>
            <li><strong>vehicle_type_id</strong> - Foreign key to vehicle_types table
                <ul>
                    <li>CRITICAL RELATIONSHIP: Links this physical vehicle to its type classification</li>
                    <li>Determines capacity, service type, and pricing</li>
                    <li>Example: vehicle_type_id = 1 (Sedan with 4 capacity)</li>
                </ul>
            </li>
            <li><strong>model</strong> - Vehicle model name (e.g., 'Toyota Camry', 'Honda CR-V')</li>
            <li><strong>color</strong> - Vehicle color (e.g., 'White', 'Black', 'Silver')</li>
            <li><strong>vin</strong> - Vehicle Identification Number (unique worldwide identifier)</li>
            <li><strong>status</strong> - Enum field: 'active', 'maintenance', 'inactive'
                <ul>
                    <li>'active' - Available for trip assignment</li>
                    <li>'maintenance' - Currently in maintenance, not available</li>
                    <li>'inactive' - Retired or out of service</li>
                </ul>
            </li>
            <li><strong>insurance_expiry</strong> - Date when insurance policy expires (used for alerts)</li>
            <li><strong>registration_expiry</strong> - Date when vehicle registration expires (used for alerts)</li>
            <li><strong>created_at</strong> - Timestamp when vehicle record was created</li>
            <li><strong>updated_at</strong> - Timestamp of last modification</li>
            <li><strong>deleted_at</strong> - Timestamp for soft delete (vehicle kept in database but marked deleted)
            </li>
        </ul>

        <h4>Vehicle Type Relationship (Critical)</h4>
        <p><strong>The Vehicle and VehicleType relationship is one of the most important in the system:</strong></p>
        <ul>
            <li><strong>One VehicleType to Many Vehicles:</strong> One 'Sedan' type can have 10 physical sedan vehicles
            </li>
            <li><strong>Foreign Key Constraint:</strong> vehicle.vehicle_type_id must reference a valid vehicle_types.id
            </li>
            <li><strong>Cascade Delete:</strong> If a VehicleType is deleted, related vehicles are handled appropriately
            </li>
            <li><strong>Usage Example:</strong>
                <ul>
                    <li>Admin creates VehicleType 'SUV' with capacity 7</li>
                    <li>Admin adds 5 physical vehicles (2018 Toyota Highlander, 2019 Nissan Pathfinder, etc.) all linked
                        to SUV type</li>
                    <li>When assigning a trip needing 6 passengers, system suggests available SUVs (all with 7 capacity)
                    </li>
                </ul>
            </li>
        </ul>

        <h4>Status Management</h4>
        <ul>
            <li><strong>Active Status:</strong>
                <ul>
                    <li>Vehicle is operational and available for trip assignment</li>
                    <li>Can be assigned to drivers and trips</li>
                    <li>Appears in available vehicle lists</li>
                </ul>
            </li>
            <li><strong>Maintenance Status:</strong>
                <ul>
                    <li>Vehicle is currently being serviced or repaired</li>
                    <li>NOT available for trip assignment</li>
                    <li>Hidden from available vehicle lists</li>
                    <li>Used to track when vehicle will return to active status</li>
                </ul>
            </li>
            <li><strong>Inactive Status:</strong>
                <ul>
                    <li>Vehicle is retired, sold, or permanently out of service</li>
                    <li>Never available for trip assignment</li>
                    <li>Kept in database for historical/audit purposes</li>
                </ul>
            </li>
        </ul>

        <h4>Driver Assignment (Many-to-Many via DriverVehicle)</h4>
        <ul>
            <li><strong>Relationship:</strong> One vehicle can have multiple authorized drivers</li>
            <li><strong>Use Case:</strong> A Sedan (plate ABC-1234) is authorized for drivers Ahmed, Mohammed, and
                Fatima</li>
            <li><strong>Benefits:</strong>
                <ul>
                    <li>Flexibility: Drivers can use different vehicles based on availability</li>
                    <li>Security: Only authorized drivers can use specific vehicles</li>
                    <li>Tracking: System knows which drivers are qualified for which vehicles</li>
                </ul>
            </li>
        </ul>

        <h4>Trip Assignment</h4>
        <ul>
            <li><strong>One-to-Many Relationship:</strong> One vehicle can be assigned to many trips over time</li>
            <li><strong>Assignment Logic:</strong>
                <ul>
                    <li>Trip requires X passengers</li>
                    <li>System filters vehicles with sufficient capacity (via vehicle_type_id ‚Üí capacity)</li>
                    <li>System filters vehicles with 'active' status</li>
                    <li>System checks if vehicle is currently assigned to another trip</li>
                    <li>Suggests available vehicles with matching capacity</li>
                </ul>
            </li>
            <li><strong>Example:</strong>
                <ul>
                    <li>Trip needs 8 passengers</li>
                    <li>Only 'Van' type vehicles (capacity 12) are suggested</li>
                    <li>VAN-001 is active, VAN-002 is in maintenance (filtered out)</li>
                    <li>VAN-001 is assigned to trip</li>
                </ul>
            </li>
        </ul>

        <h4>Maintenance Tracking</h4>
        <ul>
            <li><strong>Insurance Expiry:</strong> Track when insurance policy needs renewal</li>
            <li><strong>Registration Expiry:</strong> Track when vehicle registration needs renewal</li>
            <li><strong>Status Updates:</strong> Change status to 'maintenance' when vehicle is in the shop</li>
            <li><strong>Alerts:</strong> System can alert admin when insurance/registration is about to expire</li>
        </ul>

        <h4>Related Models</h4>
        <pre><code>Vehicle
‚îú‚îÄ VehicleType (Foreign key: vehicle_type_id)
‚îú‚îÄ Trip (Assigned to many trips via trip.vehicle_id)
‚îú‚îÄ DriverVehicle (Many drivers authorized to use this vehicle)
‚îî‚îÄ Expense (Trip-related expenses can reference vehicle)</code></pre>

        <h4>Complete Vehicle-VehicleType Relationship Diagram</h4>
        <pre><code>VehicleType (Master Data Table)
    |
    | HasMany
    |
 Vehicle (Physical Fleet Assets)
    |
    +-- vehicle_type_id (FK) ‚Üí VehicleType.id
    |
    +-- Driver Assignment (Many-to-Many via DriverVehicle)
    |   |
    |   +-- Driver (authorized to operate vehicle)
    |
    +-- Trip Assignment (One-to-Many)
        |
        +-- Trip (vehicle_id references this vehicle)


Example Flow:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
1. Admin creates VehicleType:
   - Name: 'Sedan'
   - Capacity: 4

2. Admin adds 3 physical vehicles:
   - Vehicle 1: Plate 'ABC-1234', VehicleType='Sedan' (capacity 4)
   - Vehicle 2: Plate 'ABC-1235', VehicleType='Sedan' (capacity 4)
   - Vehicle 3: Plate 'ABC-1236', VehicleType='Sedan' (capacity 4)

3. Assign drivers to Vehicle 1:
   - Ahmed (licensed for this vehicle)
   - Mohammed (licensed for this vehicle)

4. Create Trip:
   - Customer books 4-passenger trip
   - System queries: VehicleType.Sedan ‚Üí finds 4-capacity vehicles
   - Filters: Vehicle 1 (active), Vehicle 2 (in maintenance - filtered out), Vehicle 3 (active)
   - Suggests: Vehicle 1 or Vehicle 3
   - Admin assigns: Vehicle 1
   - System checks: Ahmed available? ‚Üí assigns Ahmed as driver
   - Trip created with: Vehicle 1 + Ahmed + 4 passengers</code></pre>

        <hr style="margin: 30px 0; border: none; border-top: 2px solid #ddd;">

        <h3>Travel Routes (ÿßŸÑŸÖÿ≥ÿßÿ±ÿßÿ™)</h3>

        <h4>Purpose</h4>
        <p>Define standard routes with waypoints for consistent trip planning and tracking.</p>

        <h4>Main Functions</h4>
        <ul>
            <li><strong>Route Definition:</strong> Create named routes (e.g., "Riyadh Center to Airport")</li>
            <li><strong>Waypoint Management:</strong> Add sequential waypoints with locations, order, and stop type</li>
            <li><strong>Distance/Duration:</strong> Record estimated km and minutes for planning</li>
            <li><strong>Route Type:</strong> Specify if one-way, return, or multi-point</li>
            <li><strong>Geographical Validation:</strong> Use GeoCache model to cache location lookups for performance
            </li>
            <li><strong>Trip Type Association:</strong> Link routes to TripType via TripTypeRoutes</li>
            <li><strong>Route Comparison:</strong> Compare planned vs. actual route taken during execution</li>
        </ul>

        <h4>Data Model</h4>
        <pre><code>TravelRoute
‚îú‚îÄ TravelRouteWaypoint (Ordered stops)
‚îú‚îÄ TripTypeRoutes (Linked trip types)
‚îî‚îÄ Trip (Instances using this route)</code></pre>

        <h4>Use in Operations</h4>
        <p>When a driver starts a trip, the system shows the planned TravelRoute on their mobile app. GPS tracking
            compares actual path against planned waypoints, triggering alerts for significant deviations.</p>

        <hr style="margin: 30px 0; border: none; border-top: 2px solid #ddd;">

        <h3>Customers (ÿßŸÑÿπŸÖŸÑÿßÿ°) - Integrated into Trips Module</h3>

        <p><strong>Note:</strong> Customer management has been consolidated into the unified <strong>Trips</strong>
            module above. All customer operations including creation, editing, viewing profiles, and managing relatives
            are now handled through the trip interface. When you create a trip, you can:</p>
        <ul>
            <li>‚úÖ Search and select existing customers</li>
            <li>‚úÖ Create new customer profiles inline</li>
            <li>‚úÖ View complete customer history from trip context</li>
            <li>‚úÖ Manage customer relatives and emergency contacts</li>
            <li>‚úÖ Track customer classification (new, regular, VIP, corporate)</li>
            <li>‚úÖ Add special notes and service preferences</li>
        </ul>

        <p>This consolidation eliminates separate customer list/create/edit pages, providing a streamlined workflow
            where customer and trip management are unified.</p>

        <hr style="margin: 30px 0; border: none; border-top: 2px solid #ddd;">

        <h3>Reports (ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™)</h3>

        <h4>Purpose</h4>
        <p>Incident and complaint management system for operational issues.</p>

        <h4>Main Functions</h4>
        <ul>
            <li><strong>Report Creation:</strong> Log incidents with:
                <ul>
                    <li>Photo evidence (photo_path field)</li>
                    <li>Detailed description</li>
                    <li>Report type classification</li>
                    <li>Attachment files</li>
                </ul>
            </li>
            <li><strong>Status Tracking:</strong> Monitor report progress from creation to resolution</li>
            <li><strong>Message System:</strong> ReportMessage model allows back-and-forth communication</li>
            <li><strong>Assignment:</strong> Assign reports to staff for investigation</li>
            <li><strong>Resolution:</strong> Track resolution notes and closure</li>
            <li><strong>Analytics:</strong> Generate incident reports by type, severity, resolution time</li>
        </ul>

        <h4>Related Models</h4>
        <pre><code>Report
‚îú‚îÄ ReportMessage (Discussion thread)
‚îî‚îÄ Attachment files (Evidence)</code></pre>

        <hr style="margin: 30px 0; border: none; border-top: 2px solid #ddd;">

        <h3>Agents (ÿßŸÑŸàŸÉŸÑÿßÿ°)</h3>

        <h4>Purpose</h4>
        <p>Manage travel agents/brokers and their commission tracking.</p>

        <h4>Main Functions</h4>
        <ul>
            <li><strong>Agent Registry:</strong> Create agent accounts with:
                <ul>
                    <li>Business name and contact info</li>
                    <li>Commission type (fixed or percentage)</li>
                    <li>Commission value</li>
                    <li>Credit limit</li>
                </ul>
            </li>
            <li><strong>Commission Tracking:</strong> Calculate and track agent earnings
                <ul>
                    <li>Fixed commission per trip</li>
                    <li>Percentage of trip value</li>
                </ul>
            </li>
            <li><strong>Credit Management:</strong> Monitor credit usage against limit</li>
            <li><strong>Payment Settlements:</strong> Track agent payments and balances</li>
            <li><strong>Activity Reports:</strong> View agent's trip volume and earnings</li>
            <li><strong>Status Management:</strong> Activate/deactivate agents</li>
        </ul>

        <h4>Commission Example</h4>
        <pre><code>Agent: "Wasel Travel"
  Commission Type: Percentage (10%)
  Credit Limit: 50,000 SAR
  
  This Month:
    Trips: 25
    Total Income Generated: 75,000 SAR
    Commission Due: 75,000 √ó 10% = 7,500 SAR
    Credit Used: 5,000 SAR
    Available Credit: 45,000 SAR</code></pre>

        <hr style="margin: 30px 0; border: none; border-top: 2px solid #ddd;">

        <h3>Alerts (ÿßŸÑÿ•ŸÜÿ∞ÿßÿ±ÿßÿ™)</h3>

        <h4>Purpose</h4>
        <p>System alert management with real-time notifications and tracking.</p>

        <h4>Main Functions</h4>
        <ul>
            <li><strong>Alert Creation:</strong> System generates alerts for:
                <ul>
                    <li>Route deviations</li>
                    <li>Driver behavior issues</li>
                    <li>Vehicle maintenance alerts</li>
                    <li>Payment non-compliance</li>
                    <li>Workflow step timeouts</li>
                </ul>
            </li>
            <li><strong>Alert Types:</strong> Categorize by severity (critical, warning, info)</li>
            <li><strong>Alert Status:</strong> New, reviewed, resolved</li>
            <li><strong>Badge Counter:</strong> Display "alerts count" badge on sidebar</li>
            <li><strong>Alert Dashboard:</strong> View all open alerts in list</li>
            <li><strong>Resolution Tracking:</strong> Mark alerts as addressed</li>
        </ul>

        <h4>Alert Types Model</h4>
        <p>AlertType and AlertTypes models define categories and descriptions for different alert scenarios.</p>

        <hr style="margin: 30px 0; border: none; border-top: 2px solid #ddd;">

        <h3>Finance Group (ÿßŸÑŸÖÿßŸÑŸäÿ©)</h3>

        <p>Expandable menu group for financial operations and reporting.</p>

        <h4>1. Cashier (ÿßŸÑÿÆÿ≤ŸäŸÜÿ©)</h4>
        <p><strong>Purpose:</strong> Cash handling and daily settlement</p>
        <ul>
            <li><strong>Functionality:</strong>
                <ul>
                    <li>Record daily cash received from trips</li>
                    <li>Track cash in/out transactions</li>
                    <li>Generate daily cash settlement reports</li>
                    <li>Reconcile cash with system records</li>
                    <li>Bank deposit tracking</li>
                </ul>
            </li>
        </ul>

        <h4>2. Collections (ÿßŸÑÿ™ÿ≠ÿµŸäŸÑ)</h4>
        <p><strong>Purpose:</strong> Manage payment collection from customers</p>
        <ul>
            <li><strong>Functionality:</strong>
                <ul>
                    <li>View PaymentCollection records for trips</li>
                    <li>Record cash received with automatic change calculation</li>
                    <li>Track payment methods (cash, card, link, return)</li>
                    <li>Mark payments as confirmed or pending</li>
                    <li>Print payment receipts and slips</li>
                    <li>Generate collection reports by date range</li>
                </ul>
            </li>
            <li><strong>Automatic Calculations:</strong>
                <ul>
                    <li>Cash change = received - amount</li>
                    <li>Outstanding = amount - received</li>
                    <li>Status = confirmed if received ‚â• amount</li>
                </ul>
            </li>
        </ul>

        <h4>3. Payment Vouchers (ÿßŸÑÿ≠ŸàÿßŸÑÿßÿ™ ÿßŸÑŸÖÿßŸÑŸäÿ©)</h4>
        <p><strong>Purpose:</strong> Create and track payment vouchers for agents and staff</p>
        <ul>
            <li><strong>Functionality:</strong>
                <ul>
                    <li>Create vouchers for agent commission payments</li>
                    <li>Create vouchers for staff salary advances</li>
                    <li>Track voucher status (draft, approved, paid, canceled)</li>
                    <li>Attach supporting documentation</li>
                    <li>Generate voucher reports</li>
                </ul>
            </li>
            <li><strong>Accounting Integration:</strong> VoucherPostingService posts vouchers to journal entries</li>
        </ul>

        <h4>4. Expenses (ÿßŸÑŸÖÿµÿ±ŸàŸÅÿßÿ™)</h4>
        <p><strong>Purpose:</strong> Track and manage operational expenses</p>
        <ul>
            <li><strong>Functionality:</strong>
                <ul>
                    <li>Record expenses by category (fuel, maintenance, tolls, etc.)</li>
                    <li>Attach receipts and evidence files (ExpenseFile)</li>
                    <li>Track expenses by vehicle, driver, or trip</li>
                    <li>Approve/reject expense claims</li>
                    <li>Generate expense reports and summaries</li>
                </ul>
            </li>
            <li><strong>Workflow:</strong> Submit ‚Üí Review ‚Üí Approve ‚Üí Post to Journal</li>
        </ul>

        <hr style="margin: 30px 0; border: none; border-top: 2px solid #ddd;">

        <h3>Reports (ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ±)</h3>

        <h4>Purpose</h4>
        <p>Comprehensive reporting and analytics for business intelligence.</p>

        <h4>Report Categories</h4>
        <ul>
            <li><strong>Operational Reports:</strong>
                <ul>
                    <li>Daily trip summary (count, revenue, completion %)</li>
                    <li>Driver performance (trips completed, ratings, on-time %)</li>
                    <li>Vehicle utilization (trips per vehicle, idle time)</li>
                </ul>
            </li>
            <li><strong>Financial Reports:</strong>
                <ul>
                    <li>Revenue by trip type/date/agent</li>
                    <li>Collections report (cash received vs. outstanding)</li>
                    <li>Agent commission statements</li>
                    <li>Expense summary by category</li>
                </ul>
            </li>
            <li><strong>Quality Reports:</strong>
                <ul>
                    <li>Customer evaluation scores</li>
                    <li>Incident/complaint analysis</li>
                    <li>Driver conduct reports</li>
                </ul>
            </li>
        </ul>

        <hr style="margin: 30px 0; border: none; border-top: 2px solid #ddd;">

        <h3>Admin Group (ÿßŸÑÿ•ÿØÿßÿ±ÿ©)</h3>

        <p>Expandable menu group for system administration and configuration.</p>

        <h4>1. User Management (ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ)</h4>
        <p><strong>Purpose:</strong> Control user accounts and access</p>
        <ul>
            <li><strong>Functionality:</strong>
                <ul>
                    <li>Create/edit/delete user accounts</li>
                    <li>Assign roles to users (admin, operator, driver, etc.)</li>
                    <li>Reset passwords</li>
                    <li>Manage user status (active, suspended, inactive)</li>
                    <li>View user activity logs</li>
                </ul>
            </li>
        </ul>

        <h4>2. Roles (ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ£ÿØŸàÿßÿ±)</h4>
        <p><strong>Purpose:</strong> Define and manage role definitions</p>
        <ul>
            <li><strong>Functionality:</strong>
                <ul>
                    <li>Create custom roles with specific permission sets</li>
                    <li>View role details and assigned users</li>
                    <li>Edit role permissions</li>
                    <li>Archive/delete unused roles</li>
                </ul>
            </li>
            <li><strong>Standard Roles:</strong> Admin, Manager, Operator, Driver, Customer Service</li>
        </ul>

        <h4>3. Permissions (ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿµŸÑÿßÿ≠Ÿäÿßÿ™)</h4>
        <p><strong>Purpose:</strong> Manage granular permissions system</p>
        <ul>
            <li><strong>Functionality:</strong>
                <ul>
                    <li>View all system permissions</li>
                    <li>Create new permission definitions</li>
                    <li>Edit permission descriptions</li>
                    <li>Review permission-role mappings</li>
                </ul>
            </li>
            <li><strong>Permission Structure:</strong> menu.module.action format (e.g., menu.trips.create)</li>
        </ul>

        <h4>4. Evaluation Forms (ŸÜŸÖÿßÿ∞ÿ¨ ÿßŸÑÿ™ŸÇŸäŸäŸÖ)</h4>
        <p><strong>Purpose:</strong> Design and manage quality evaluation forms</p>
        <ul>
            <li><strong>Functionality:</strong>
                <ul>
                    <li>Create evaluation forms with custom questions</li>
                    <li>Define field types (rating, text, checkbox, etc.)</li>
                    <li>Assign forms to trip types for automatic deployment</li>
                    <li>View form responses and scores</li>
                </ul>
            </li>
            <li><strong>Data Model:</strong>
                <ul>
                    <li>EvaluationForm: Form definition</li>
                    <li>EvaluationFormField: Individual questions</li>
                </ul>
            </li>
        </ul>

        <hr style="margin: 30px 0; border: none; border-top: 2px solid #ddd;">

        <h3>Staff (ÿßŸÑŸÖŸàÿ∏ŸÅŸàŸÜ)</h3>

        <h4>Purpose</h4>
        <p>Manage employee records and staff operations.</p>

        <h4>Main Functions</h4>
        <ul>
            <li><strong>Staff Registry:</strong> Create and maintain staff profiles</li>
            <li><strong>Role Assignment:</strong> Assign staff to operational roles</li>
            <li><strong>Attendance Tracking:</strong> Monitor staff work schedules</li>
            <li><strong>Performance Records:</strong> Track performance metrics and evaluations</li>
            <li><strong>Salary Management:</strong> (If configured) Manage staff compensation</li>
            <li><strong>Activity Logs:</strong> View staff actions in the system</li>
        </ul>

        <hr style="margin: 30px 0; border: none; border-top: 2px solid #ddd;">

        <h3>Settings (ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™)</h3>

        <h4>Purpose</h4>
        <p>System configuration and preferences.</p>

        <h4>Configuration Options</h4>
        <ul>
            <li><strong>Company Information:</strong> Business name, logo, contact details</li>
            <li><strong>Payment Settings:</strong> Default payment methods, bank accounts</li>
            <li><strong>Email Configuration:</strong> SMTP settings for notifications</li>
            <li><strong>SMS Settings:</strong> SMS gateway configuration for driver/customer alerts</li>
            <li><strong>Workflow Defaults:</strong> Default workflows for trip types</li>
            <li><strong>Report Templates:</strong> Customize report layouts</li>
            <li><strong>Localization:</strong> Language, timezone, currency settings</li>
        </ul>

        <div class="footer">
            <p><strong>MOEAN Transportation Management System</strong></p>
            <p>Sidebar Menu & Feature Guide Documentation</p>
            <p>Generated: December 2025</p>
            <p>¬© MOEAN Project. All rights reserved.</p>
        </div>
    </div>
</body>

</html>